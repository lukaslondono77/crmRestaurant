<!DOCTYPE html>
<html lang="zxx">
    <head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Links Of CSS File -->
		<link rel="stylesheet" href="../assets/css/sidebar-menu.css">
		<link rel="stylesheet" href="../assets/css/simplebar.css">
		<link rel="stylesheet" href="../assets/css/prism.css">
        <link rel="stylesheet" href="../assets/css/quill.snow.css">
        <link rel="stylesheet" href="../assets/css/remixicon.css">
        <link rel="stylesheet" href="../assets/css/swiper-bundle.min.css">
        <link rel="stylesheet" href="../assets/css/jsvectormap.min.css">
		<link rel="stylesheet" href="../assets/css/style.css">
		
		<!-- Favicon -->
		<link rel="icon" type="image/png" href="../assets/images/favicon.png">
        
		<!-- Title -->
		<title>Cloudignite - Restaurant Cost Control Platform</title>
    </head>
    <body class="bg-body-bg">
        
        <!-- Start Preloader Area -->
        <div class="preloader" id="preloader">
            <div class="preloader">
                <div class="waviy position-relative">
                    <span class="d-inline-block">C</span>
                    <span class="d-inline-block">l</span>
                    <span class="d-inline-block">o</span>
                    <span class="d-inline-block">u</span>
                    <span class="d-inline-block">d</span>
                    <span class="d-inline-block">i</span>
                    <span class="d-inline-block">g</span>
                    <span class="d-inline-block">n</span>
                    <span class="d-inline-block">i</span>
                    <span class="d-inline-block">t</span>
                    <span class="d-inline-block">e</span>
                </div>
            </div>
        </div>
        <!-- End Preloader Area -->

        <!-- Start Sidebar Area -->
        <div class="sidebar-area" id="sidebar-area">
            <div class="logo position-relative d-flex align-items-center justify-content-between">
                <a href="index.html" class="d-block text-decoration-none position-relative">
                    <img src="../assets/images/logo-icon.png" alt="logo-icon">
                    <span class="logo-text text-secondary fw-semibold">Cloudignite</span>
                </a> 
                <button class="sidebar-burger-menu-close bg-transparent py-3 border-0 opacity-0 z-n1 position-absolute top-50 end-0 translate-middle-y" id="sidebar-burger-menu-close">
                    <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px; transform: rotate(45deg);"></span>
                    <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px; transform: rotate(-45deg);"></span>
                </button>
                <button class="sidebar-burger-menu bg-transparent p-0 border-0" id="sidebar-burger-menu">
                    <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px;"></span>
                    <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px; margin: 6px 0;"></span>
                    <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px;"></span>
                </button>
            </div>

            <aside id="layout-menu" class="layout-menu menu-vertical menu active" data-simplebar>
                <ul class="menu-inner">
                    <li class="menu-title small text-uppercase">
                        <span class="menu-title-text">MAIN</span>
                    </li>
                    <li class="menu-item" id="nav-owner-view">
                        <a href="owner-view.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">visibility</span>
                            <span class="title">Owner View</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="index.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">dashboard</span>
                            <span class="title">Loss Summary</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="products-list.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">inventory_2</span>
                            <span class="title">Inventory Control</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="analytics.html" class="menu-link active">
                            <span class="material-symbols-outlined menu-icon">delete</span>
                            <span class="title">Waste Tracking</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="reports.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">groups</span>
                            <span class="title">Labor Cost Analysis</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="products-list.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">restaurant_menu</span>
                            <span class="title">Menu Profitability</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="invoices.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">local_shipping</span>
                            <span class="title">Suppliers & Invoices</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="analytics.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">task_alt</span>
                            <span class="title">Action Items</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="manual-data-entry.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">edit_note</span>
                            <span class="title">Manual Data Entry</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="reports.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">assessment</span>
                            <span class="title">Reports & Exports</span>
                        </a>
                    </li>

                    <li class="menu-item">
                        <a href="alerts.html" class="menu-link">
                            <span class="material-symbols-outlined menu-icon">notifications</span>
                            <span class="title">Alerts</span>
                        </a>
                    </li>

                    <li class="menu-title small text-uppercase">
                        <span class="menu-title-text">SETTINGS</span>
                    </li>

                    <li class="menu-item">
                        <a href="javascript:void(0);" class="menu-link menu-toggle">
                            <span class="material-symbols-outlined menu-icon">settings</span>
                            <span class="title">Settings</span>
                        </a>
                        <ul class="menu-sub">
                            <li class="menu-item"><a href="account-settings.html" class="menu-link">Account Settings</a></li>
                            <li class="menu-item"><a href="change-password.html" class="menu-link">Change Password</a></li>
                            <li class="menu-item"><a href="settings.html" class="menu-link">Restaurant Settings</a></li>
                        </ul>
                    </li>
                </ul>
            </aside>
        </div>
        <!-- End Sidebar Area -->

        <!-- Start Main Content Area -->
        <div class="container-fluid">
            <div class="main-content d-flex flex-column">
                <!-- Start Header Area -->
                <header class="header-area bg-white mb-4 rounded-10 border border-white" id="header-area">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="left-header-content">
                                <ul class="d-flex align-items-center ps-0 mb-0 list-unstyled justify-content-center justify-content-md-start">
                                    <li class="d-xl-none">
                                        <button class="header-burger-menu bg-transparent p-0 border-0 position-relative top-3" id="header-burger-menu">
                                            <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px;"></span>
                                            <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px; margin: 6px 0;"></span>
                                            <span class="border-1 d-block for-dark-burger" style="border-bottom: 1px solid #475569; height: 1px; width: 25px;"></span>
                                        </button>
                                    </li>
                                    <li>
                                        <form class="src-form position-relative">
                                            <input type="text" class="form-control" placeholder="Search here...">
                                            <div class="src-btn position-absolute top-50 start-0 translate-middle-y bg-transparent p-0 border-0">
                                                <span class="material-symbols-outlined">search</span>
                                            </div>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="right-header-content mt-3 mt-md-0">
                                <ul class="d-flex align-items-center justify-content-center justify-content-md-end ps-0 mb-0 list-unstyled">
                                    <li class="header-right-item language-item">
                                        <div class="dropdown notifications language">
                                            <button class="btn btn-secondary dropdown-toggle border-0 p-0 position-relative" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <span class="material-symbols-outlined" style="font-size: 19px;">translate</span>
                                            </button>
                                            <div class="dropdown-menu dropdown-lg p-0 border-0 dropdown-menu-end">
                                                <span class="fw-medium fs-16 text-secondary d-block title" style="padding-top: 20px; padding-bottom: 20px;">Choose Language</span>
                                                <div class="max-h-275" data-simplebar>
                                                    <div class="notification-menu">
                                                        <a href="javascript:void(0);" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/usa.png" class="wh-30 rounded-circle" alt="usa">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <span class="text-secondary fw-medium fs-15">English</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu">
                                                        <a href="javascript:void(0);" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/australia.png" class="wh-30 rounded-circle" alt="australia">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <span class="text-secondary fw-medium fs-15">Australia</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu">
                                                        <a href="javascript:void(0);" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/spain.png" class="wh-30 rounded-circle" alt="spain">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <span class="text-secondary fw-medium fs-15">Spanish</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu">
                                                        <a href="javascript:void(0);" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/france.png" class="wh-30 rounded-circle" alt="portugal">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <span class="text-secondary fw-medium fs-15">France</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu mb-0">
                                                        <a href="javascript:void(0);" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/germany.png" class="wh-30 rounded-circle" alt="Germany">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <span class="text-secondary fw-medium fs-15">Spain</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="header-right-item light-dark-item">
                                        <div class="light-dark">
                                            <button class="switch-toggle dark-btn p-0 bg-transparent lh-0 border-0" id="switch-toggle">
                                                <span class="dark"><i class="material-symbols-outlined">dark_mode</i></span> 
                                                <span class="light"><i class="material-symbols-outlined">light_mode</i></span>
                                            </button>
                                        </div>
                                    </li>
                                    <li class="header-right-item calendar-item">
                                        <div class="dropdown notifications">
                                            <a href="blank-page.html" class="btn btn-secondary border-0 p-0 position-relative">
                                                <span class="material-symbols-outlined" style="font-size: 19px;">calendar_today</span>
                                            </a>
                                        </div>
                                    </li>
                                    <li class="header-right-item messages-item">
                                        <div class="dropdown notifications noti messages">
                                            <button class="btn btn-secondary border-0 p-0 position-relative" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <span class="material-symbols-outlined">mail</span>
                                                <span class="count bg-primary">5</span>
                                            </button>
                                            <div class="dropdown-menu dropdown-lg p-0 border-0 p-0 dropdown-menu-end">
                                                <div class="d-flex justify-content-between align-items-center title">
                                                    <span class="fw-medium fs-16 text-secondary">Messages <span class="fw-normal text-body fs-16">(03)</span></span>
                                                    <button class="p-0 m-0 bg-transparent border-0 fs-15 text-primary fw-medium">Mark all as read</button>
                                                </div> 

                                                <div style="max-height: 300px;" data-simplebar>
                                                    <div class="notification-menu unseen">
                                                        <a href="blank-page.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/user1.jpg" class="rounded-circle" style="width: 44px; height: 44px;" alt="images">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <p class="fs-16 fw-medium text-secondary mb-2">Jacob Liwiski <span class="fs-14 fw-normal text-body ms-2">35 min ago</span></p>
                                                                    <span class="fs-14-5 fw-medium d-inline-block" style="line-height: 1.4;">Hey Victor! Could you please...</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu unseen">
                                                        <a href="blank-page.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/user2.jpg" class="rounded-circle" style="width: 44px; height: 44px;" alt="images">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <p class="fs-16 fw-medium text-secondary mb-2">Angela Carter <span class="fs-14 fw-normal text-body ms-2">1 day ago</span></p>
                                                                    <span class="fs-14-5 fw-medium d-inline-block" style="line-height: 1.4;">How are you Angela? Would you please...</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu">
                                                        <a href="blank-page.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <img src="../assets/images/user3.jpg" class="rounded-circle" style="width: 44px; height: 44px;" alt="images">
                                                                </div>
                                                                <div class="flex-grow-1 ms-10">
                                                                    <p class="fs-16 fw-medium text-secondary mb-2">Brad Traversy <span class="fs-14 fw-normal text-body ms-2">2 days ago</span></p>
                                                                    <span class="fs-14-5 fw-medium d-inline-block" style="line-height: 1.4;">Hey Brad Traversy! Could you please...</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>

                                                <a href="blank-page.html" class="dropdown-item text-center text-primary d-block view-all fw-medium rounded-bottom-3">
                                                    <span>See All Messages</span>
                                                </a>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="header-right-item">
                                        <div class="dropdown notifications noti">
                                            <button class="btn btn-secondary border-0 p-0 position-relative" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <span class="material-symbols-outlined">notifications</span>
                                                <span class="count">3</span>
                                            </button>
                                            <div class="dropdown-menu dropdown-lg p-0 border-0 p-0 dropdown-menu-end">
                                                <div class="d-flex justify-content-between align-items-center title">
                                                    <span class="fw-medium fs-16 text-secondary">Notifications <span class="fw-normal text-body fs-16">(03)</span></span>
                                                    <button class="p-0 m-0 bg-transparent border-0 fs-15 text-primary fw-medium">Clear All</button>
                                                </div> 

                                                <div style="max-height: 300px;" data-simplebar>
                                                    <div class="notification-menu unseen">
                                                        <a href="notifications.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <i class="material-symbols-outlined text-primary">sms</i>
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <p class="fs-16 fw-medium text-secondary">You have requested to withdrawal</p>
                                                                    <span class="fs-14 fw-medium">2 hrs ago</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu unseen">
                                                        <a href="notifications.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <i class="material-symbols-outlined text-info">person</i>
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <p class="fs-16 fw-medium text-secondary">A new user added in Fila</p>
                                                                    <span class="fs-14 fw-medium">3 hrs ago</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="notification-menu">
                                                        <a href="notifications.html" class="dropdown-item">
                                                            <div class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    <i class="material-symbols-outlined text-success">mark_email_unread</i>
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <p class="fs-16 fw-medium text-secondary">You have requested to withdrawal</p>
                                                                    <span class="fs-14 fw-medium">1 day ago</span>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>

                                                <a href="notifications.html" class="dropdown-item text-center text-primary d-block view-all fw-medium rounded-bottom-3">
                                                    <span>See All Notifications </span>
                                                </a>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="header-right-item">
                                        <div class="dropdown admin-profile">
                                            <div class="d-xxl-flex align-items-center bg-transparent border-0 text-start p-0 cursor dropdown-toggle" data-bs-toggle="dropdown">
                                                <div class="flex-shrink-0 position-relative">
                                                    <img class="rounded-circle admin-img-width-for-mobile" style="width: 40px; height: 40px;" src="../assets/images/admin.png" alt="admin">
                                                    <span class="d-block bg-success-60 border border-2 border-white rounded-circle position-absolute end-0 bottom-0" style="width: 11px; height: 11px;"></span>
                                                </div>
                                            </div>
    
                                            <div class="dropdown-menu border-0 bg-white dropdown-menu-end">
                                                <div class="d-flex align-items-center info">
                                                    <div class="flex-shrink-0">
                                                        <img class="rounded-circle admin-img-width-for-mobile" style="width: 40px; height: 40px;" src="../assets/images/admin.png" alt="admin">
                                                    </div>
                                                    <div class="flex-grow-1 ms-10">
                                                        <h3 class="fw-medium fs-17 mb-0 user-name">Loading...</h3>
                                                        <span class="fs-15 fw-medium user-role">Loading...</span>
                                                    </div>
                                                </div>
                                                <ul class="admin-link mb-0 list-unstyled">
                                                    <li>
                                                        <a class="dropdown-item admin-item-link d-flex align-items-center text-body" href="my-profile.html">
                                                            <i class="material-symbols-outlined">person</i>
                                                            <span class="ms-2">My Profile</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="dropdown-item admin-item-link d-flex align-items-center text-body" href="settings.html">
                                                            <i class="material-symbols-outlined">settings</i>
                                                            <span class="ms-2">Settings</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="dropdown-item admin-item-link d-flex align-items-center text-body" href="alerts.html">
                                                            <i class="material-symbols-outlined">info</i>
                                                            <span class="ms-2">Support</span>
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a class="dropdown-item admin-item-link d-flex align-items-center text-body" href="logout.html">
                                                            <i class="material-symbols-outlined">logout</i>
                                                            <span class="ms-2">Logout</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </header>
                <!-- End Header Area -->

                <div class="main-content-container overflow-hidden">
                    <div class="row">
                        <div class="col-xxl-6 col-xxxxxl-12">
                            <div class="card rounded-10 border-0 mb-4 bg-img zinnia-card" style="background: linear-gradient(101deg, #5040F4 55.73%, #796DF6 99.52%); padding: 30.5px 40px;">
                                <div class="row align-items-center">
                                    <div class="col-sm-6 col-lg-7">
                                        <h2 class="fs-26 fw-normal text-white mb-3">Waste & Cost Analytics</h2>
                                        <p class="fs-16 lh-1-8 hospital-content" style="color: #CBC7FF; margin-bottom: 40px;">Track your restaurant's waste, food costs, and identify areas for savings. Monitor trends to reduce losses and increase profitability.</p>
                                        <div class="d-flex flex-wrap gap-3">
                                            <div class="d-flex rounded-1" style="padding: 9px 12px; background: rgba(255, 255, 255, 0.16);">
                                                <div class="flex-shrink-0">
                                                    <i class="ri-delete-bin-line fs-18 text-center rounded-circle d-inline-block" style="background-color: #C5CBFF; color: #382C83; width: 36px; height: 36px; line-height: 36px;"></i>
                                                </div>
                                                
                                                <div class="flex-grow-1 ms-10">
                                                    <span class="fs-15" style="color: #CBC7FF;">Waste This Week</span>
                                                    <div class="d-flex align-items-center">
                                                        <h2 class="fs-16 mb-0 lh-1" style="color: #fff;" id="weekly-waste-amount">$0</h2>
                                                        <span class="d-flex align-content-center gap-1 bg-danger border-white rounded-1 ms-10" style="padding: 3px 5px;">
                                                            <i class="material-symbols-outlined fs-12 text-white">trending_up</i>
                                                            <span class="lh-1 fs-12 text-white" id="waste-trend">0%</span>
                                                        </span>
                                                    </div>
                                                </div> 
                                            </div>
                                            <div class="d-flex rounded-1" style="padding: 9px 12px; background: rgba(255, 255, 255, 0.16);">
                                                <div class="flex-shrink-0">
                                                    <i class="ri-money-dollar-circle-line fs-18 text-center rounded-circle d-inline-block" style="background-color: #C5CBFF; color: #382C83; width: 36px; height: 36px; line-height: 36px;"></i>
                                                </div>
                                                
                                                <div class="flex-grow-1 ms-10">
                                                    <span class="fs-15" style="color: #CBC7FF;">Food Cost %</span>
                                                    <div class="d-flex align-items-center">
                                                        <h2 class="fs-16 mb-0 lh-1" style="color: #fff;" id="food-cost-percent">0%</h2>
                                                        <span class="d-flex align-content-center gap-1 bg-warning border-white rounded-1 ms-10" style="padding: 3px 5px;">
                                                            <i class="material-symbols-outlined fs-12 text-white">warning</i>
                                                            <span class="lh-1 fs-12 text-white" id="food-cost-target">Target: 28%</span>
                                                        </span>
                                                    </div>
                                                </div> 
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-lg-5">
                                        <div class="text-center text-sm-end mt-4 mt-sm-0" style="margin-right: 30px;">
                                            <img src="../assets/images/welcome2.png" alt="welcome2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="card bg-white p-20 py-30 rounded-10 border border-white mb-4 position-relative z-1">
                                        <div class="d-flex">
                                            <div class="flex-grow-1">
                                                <i class="ri-bar-chart-box-line rounded-1 d-flex justify-content-center align-items-center fs-28 text-primary mb-3" style="width: 50px; height: 50px; box-shadow: 0px 4px 20px 0px rgba(232, 231, 244, 0.70);"></i>
                                                <h3 class="mb-12 lh-1 fs-14 text-body">Daily Sales</h3>
                                                <div class="d-flex align-items-center">
                                                    <h2 class="fs-26 fw-bold mb-0 lh-1" id="daily-sales-amount">$0</h2>
                                                    <i class="material-symbols-outlined fs-14 text-success ms-1">trending_up</i>
                                                    <span class="lh-1 fs-14 text-success" id="sales-trend">0%</span>
                                                </div>
                                            </div>
                                            <div class="flex-shrink-0 ms-3 position-relative" style="width: 200px;">
                                                <div class="w-100 position-absolute top-50 translate-middle-y" style="right: -8px;">
                                                    <div id="visit_by_day_chart"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="card bg-white p-20 py-30 rounded-10 border border-white mb-4 position-relative z-1">
                                        <div class="d-flex">
                                            <div class="flex-grow-1">
                                                <i class="ri-delete-bin-7-line rounded-1 d-flex justify-content-center align-items-center fs-28 text-danger mb-3" style="width: 50px; height: 50px; box-shadow: 0px 4px 20px 0px rgba(232, 231, 244, 0.70);"></i>
                                                <h3 class="mb-12 lh-1 fs-14 text-body">Weekly Waste</h3>
                                                <div class="d-flex align-items-center">
                                                    <h2 class="fs-26 fw-bold mb-0 lh-1 text-danger" id="weekly-waste-total">$0</h2>
                                                    <i class="material-symbols-outlined fs-14 text-danger ms-1">trending_up</i>
                                                    <span class="lh-1 fs-14 text-danger" id="waste-percent">0%</span>
                                                </div>
                                            </div>
                                            <div class="flex-shrink-0 ms-3 position-relative" style="width: 200px;">
                                                <div class="w-100 position-absolute top-50 translate-middle-y" style="right: -8px;">
                                                    <div id="net_income_chart"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xxxxxl-12">
                            <div class="card bg-white p-40 rounded-10 border-0 mb-4 position-relative z-1 quick-view-bg" style="padding-top: 29px;">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3 class="text-white fs-26">Cost Overview</h3>
        
                                    <div class="dropdown action-opt text-center">
                                        <button class="btn bg-transparent p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="material-symbols-outlined fs-20 text-white">more_vert</i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow">
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Day
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Week
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Month
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Year
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="card bg-white rounded-10 border-0" style="box-shadow: 0px 4px 54px 0px rgba(215, 231, 223, 0.40);">
                                    <div class="row g-0">
                                        <div class="col-sm-6 border-bottom border-border-color-90">
                                            <div class="card bg-white p-40 rounded-10 border border-white mb-0 position-relative z-1">
                                                <div class="d-flex">
                                                    <div class="flex-grow-1">
                                                        <h3 class="mb-10 lh-1 fs-14 text-body fw-medium">Total Purchases</h3>
                                                        <h2 class="fs-26 fw-bold mb-10 lh-1" id="total-purchases">$0</h2>
                                                        <div class="d-inline-block" style="margin-bottom: 1px;">
                                                            <span class="d-flex align-content-center gap-1 bg-danger border-white rounded-1" style="padding: 3px 5px;">
                                                                <i class="material-symbols-outlined fs-14 text-white">trending_up</i>
                                                                <span class="lh-1 fs-12 text-white position-relative top-1" id="purchases-trend">0%</span>
                                                            </span>
                                                        </div>
                                                        <p class="mb-0 fs-14">This month</p>
                                                    </div>
                                                    <div class="flex-shrink-0 ms-3 position-relative" style="width: 64px;">
                                                        <div class="w-100 position-absolute top-50 translate-middle-y">
                                                            <i class="ri-shopping-cart-line d-flex justify-content-center align-items-center bg-primary-50 bg-opacity-10 fs-36 text-primary-50 rounded-1" style="width: 70px; height: 70px;"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 border-bottom border-start border-border-color-90">
                                            <div class="card bg-white p-40 rounded-10 border border-white mb-0 position-relative z-1">
                                                <div class="d-flex">
                                                    <div class="flex-grow-1">
                                                        <h3 class="mb-10 lh-1 fs-14 text-body fw-medium">Total Sales</h3>
                                                        <h2 class="fs-26 fw-bold mb-10 lh-1" id="total-sales">$0</h2>
                                                        <div class="d-inline-block" style="margin-bottom: 1px;">
                                                            <span class="d-flex align-content-center gap-1 bg-success-70 border-white rounded-1" style="padding: 3px 5px;">
                                                                <i class="material-symbols-outlined fs-14 text-white">trending_up</i>
                                                                <span class="lh-1 fs-12 text-white position-relative top-1" id="sales-trend-percent">0%</span>
                                                            </span>
                                                        </div>
                                                        <p class="mb-0 fs-14">This month</p>
                                                    </div>
                                                    <div class="flex-shrink-0 ms-3 position-relative" style="width: 64px;">
                                                        <div class="w-100 position-absolute top-50 translate-middle-y">
                                                            <i class="ri-line-chart-line d-flex justify-content-center align-items-center bg-success bg-opacity-10 fs-36 text-success rounded-1" style="width: 70px; height: 70px;"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="card bg-white p-40 rounded-10 border border-white mb-0 position-relative z-1">
                                                <div class="d-flex">
                                                    <div class="flex-grow-1">
                                                        <h3 class="mb-10 lh-1 fs-14 text-body fw-medium">Waste %</h3>
                                                        <h2 class="fs-26 fw-bold mb-10 lh-1" id="waste-percentage">0%</h2>
                                                        <div class="d-inline-block" style="margin-bottom: 1px;">
                                                            <span class="d-flex align-content-center gap-1 bg-warning border-white rounded-1" style="padding: 3px 5px;">
                                                                <i class="material-symbols-outlined fs-14 text-white">warning</i>
                                                                <span class="lh-1 fs-12 text-white position-relative top-1">Target: 5%</span>
                                                            </span>
                                                        </div>
                                                        <p class="mb-0 fs-14">Of total purchases</p>
                                                    </div>
                                                    <div class="flex-shrink-0 ms-3 position-relative" style="width: 64px;">
                                                        <div class="w-100 position-absolute top-50 translate-middle-y">
                                                            <i class="ri-delete-bin-line d-flex justify-content-center align-items-center bg-danger bg-opacity-10 fs-36 text-danger rounded-1" style="width: 70px; height: 70px;"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 border-start border-border-color-90">
                                            <div class="card bg-white p-40 rounded-10 border border-white mb-0 position-relative z-1">
                                                <div class="d-flex">
                                                    <div class="flex-grow-1">
                                                        <h3 class="mb-10 lh-1 fs-14 text-body fw-medium">Slow Moving Items</h3>
                                                        <h2 class="fs-26 fw-bold mb-10 lh-1" id="slow-moving-count">0</h2>
                                                        <div class="d-inline-block" style="margin-bottom: 1px;">
                                                            <span class="d-flex align-content-center gap-1 bg-warning border-white rounded-1" style="padding: 3px 5px;">
                                                                <i class="material-symbols-outlined fs-14 text-white">warning</i>
                                                                <span class="lh-1 fs-12 text-white position-relative top-1">>7 days</span>
                                                            </span>
                                                        </div>
                                                        <p class="mb-0 fs-14">Not sold in 7+ days</p>
                                                    </div>
                                                    <div class="flex-shrink-0 ms-3 position-relative" style="width: 64px;">
                                                        <div class="w-100 position-absolute top-50 translate-middle-y">
                                                            <i class="ri-box-3-line d-flex justify-content-center align-items-center bg-warning bg-opacity-10 fs-36 text-warning rounded-1" style="width: 70px; height: 70px;"></i>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xxl-3 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 p-20">
                                    <h3>Waste By Category</h3>
        
                                    <div class="dropdown select-dropdown without-border ms-1">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <ul class="p-20 pt-0 mb-0 list-unstyled last-child-none" data-simplebar="" style="max-height: 390px; margin-top: 3.5px;" id="waste-by-category-list">
                                    <li class="text-center text-muted py-4">
                                        <i class="ri-loader-4-line me-2"></i>Loading waste analysis...
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3>Cost & Sales Trends</h3>
        
                                    <div class="dropdown select-dropdown without-border ms-1">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin: -30px -20px -15px -20px;">
                                    <div id="daily_visit_insights_chart"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xxxl-12">
                            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3>Cost Breakdown</h3>
        
                                    <div class="dropdown select-dropdown without-border ms-1">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin: -30px -20px -15px -20px;">
                                    <div id="user_by_device_chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xxl-6 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3>Waste Analysis Overview</h3>
        
                                    <div class="dropdown select-dropdown without-border ms-1">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin: -25px -12px -15px -14px;"> 
                                    <div id="audience_overview_chart"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 p-20">
                                    <h3>Top Waste Items & Analysis</h3>
        
                                    <div class="dropdown select-dropdown without-border ms-1">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- REMOVE_START: Non-restaurant demo content (Browser analytics) -->
                                <div class="hide-non-restaurant">
                                <div class="default-table-area mx-minus-1 style-two table-browser-used for-border-color1">
                                    <div class="table-responsive">
                                        <table class="table align-middle">
                                            <thead>
                                                <tr>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Browser</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Users</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Transactions</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Change %</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/mozilla-firefox.png" class="rounded-circle" style="width: 24px; height: 24px;" alt="mozilla-firefox">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Mozilla Firefox</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">1250</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 80%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">18%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">3456</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">23%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-success bg-success bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-success d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-success lh-1">trending_up</i>
                                                            3.15%
                                                        </span>
                                                    </td> 
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/microsoft-edge.png" class="rounded-circle" style="width: 24px; height: 24px;" alt="mozilla-firefox">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Microsoft Edge</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">3251</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="22" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 22%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">22%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">3549</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">21%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-danger bg-danger bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-danger d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-danger lh-1">trending_down</i>
                                                            0.05%
                                                        </span>
                                                    </td> 
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/safari.png" class="rounded-circle" style="width: 24px; height: 24px;" alt="safari">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Safari</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">4624</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="27" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 27%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">27%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">2475</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">20%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-success bg-success bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-success d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-success lh-1">trending_up</i>
                                                            1.21%
                                                        </span>
                                                    </td> 
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/google-chrome.png" class="google-chrome" style="width: 24px; height: 24px;" alt="mozilla-firefox">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Google Chrome</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">7215</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 65%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">18%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">5342</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">51%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-danger bg-danger bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-danger d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-danger lh-1">trending_down</i>
                                                            1.11%
                                                        </span>
                                                    </td> 
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/opera-mini.png" class="rounded-circle" style="width: 24px; height: 24px;" alt="opera-mini">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Opera Mini</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">12407</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 90%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">90%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">7321</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">70%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-success bg-success bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-success d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-success lh-1">trending_up</i>
                                                            5.21%
                                                        </span>
                                                    </td> 
                                                </tr>
                                                <tr class="last-child-border-none">
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="flex-shrink-0">
                                                                <img src="../assets/images/others.png" class="rounded-circle" style="width: 24px; height: 24px;" alt="others">
                                                            </div>
                                                            <div class="flex-grow-1 ms-12 position-relative top-2">
                                                                <h3 class="fw-normal mb-0 fs-16 text-secondary">Others</h3>
                                                            </div>
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex justify-content-center align-items-center gap-3">
                                                            <span class="text-secondary fs-14 fw-medium">2678</span>
                                                            <div class="progress bg-light rounded-0" role="progressbar" aria-label="Basic example" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="height: 4px; width: 112px;">
                                                                <div class="progress-bar rounded-0" style="width: 5%; height: 4px; background-color: #1877F2;"></div>
                                                            </div>
                                                            <span class="text-body fs-14 fw-medium">5%</span>
                                                        </div> 
                                                    </td> 
                                                    <td>
                                                        <div class="d-flex align-items-center gap-1">
                                                            <span class="text-secondary fw-medium">1467</span>
                                                            <span class="text-body fs-14 fw-normal position-relative top-1">5%</span>
                                                        </div>
                                                    </td> 
                                                    <td class="text-body text-center">
                                                        <span class="text-danger bg-danger bg-opacity-10 fs-14 fw-normal d-inline-block default-badge style-two border border-danger d-flex align-items-center justify-content-center gap-1">
                                                            <i class="material-symbols-outlined fs-16 text-danger lh-1">trending_down</i>
                                                            1.25%
                                                        </span>
                                                    </td> 
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                </div>
                                <!-- REMOVE_END: Browser analytics -->
                            </div>
                        </div>
                    </div>
                    <!-- REMOVE_START: Non-restaurant demo (Top Browsing Pages, Visits By Country) -->
                    <div class="row hide-non-restaurant">
                        <div class="col-xxl-4">
                            <div class="card bg-white rounded-10 border border-white p-20 mb-0 rounded-bottom-0">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3>Top Browsing Pages Per Minute</h3>
        
                                    <div class="dropdown action-opt text-center">
                                        <button class="btn bg-transparent p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="material-symbols-outlined fs-20">more_vert</i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow">
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Day
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Week
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Month
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Year
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin: -29px -15px -26px -21px;">
                                    <div id="top_browsing_pages_per_minute_chart"></div>
                                </div>
                            </div>

                            <div class="card bg-white rounded-10 border border-white p-0 mb-4 rounded-top">
                                <div class="default-table-area mx-minus-1 style-two table-browser-used for-width for-border-color1">
                                    <div class="table-responsive">
                                        <table class="table align-middle w-100">
                                            <thead>
                                                <tr>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Page</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Views</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Bounce Rate</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="text-primary fs-16">/dashboard-overview</td> 
                                                    <td class="text-secondary fs-16">25</td>
                                                    <td class="text-secondary fs-16">83.9%</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-primary fs-16">/dashboard/products</td> 
                                                    <td class="text-secondary fs-16">113</td>
                                                    <td class="text-secondary fs-16">90.15%</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-primary fs-16">/dashboard/users</td> 
                                                    <td class="text-secondary fs-16">75</td>
                                                    <td class="text-secondary fs-16">25.3%</td>
                                                </tr>
                                                <tr class="last-child-border-none">
                                                    <td class="text-primary fs-16">/dashboard/performance</td> 
                                                    <td class="text-secondary fs-16">29</td>
                                                    <td class="text-secondary fs-16">17.2%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-8">
                            <div class="card bg-white rounded-10 border border-white p-20 mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-20">
                                    <h3>Visits By Country</h3>
        
                                    <div class="dropdown action-opt text-center">
                                        <button class="btn bg-transparent p-0" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="material-symbols-outlined fs-20">more_vert</i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow">
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Day
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Week
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Month
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="javascript:;">
                                                    Last Year
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="bg-body-bg p-30 rounded-10 for-dark-bg-body-bg">
                                            <div id="visits_by_country" style="height: 351px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <div id="visits_by_country_chart" style="height: 351px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- REMOVE_END: Top Browsing Pages, Visits By Country -->
                    <div class="row">
                        <div class="col-xxl-3 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white mb-4 p-20">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-1 mb-20">
                                    <h3>Slow Moving Items</h3>
    
                                    <div class="dropdown select-dropdown without-border">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div style="margin: -18px 0 -9px 0;">
                                    <div id="users_by_device_chart"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-6 col-xxxl-6">
                            <div class="card bg-white rounded-10 border border-white mb-4 p-20">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-1 mb-20">
                                    <h3>Cost Performance Trends</h3>
    
                                    <div class="dropdown select-dropdown without-border">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div style="margin: -24px -9px -26px -16px;">
                                    <div id="performance_overview_chart"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-xxxl-12">
                            <div class="card bg-white rounded-10 border border-white mb-4">
                                <div class="d-flex justify-content-between align-items-center flex-wrap gap-1 p-20">
                                    <h3>Top Waste Items</h3>
        
                                    <div class="dropdown select-dropdown without-border">
                                        <button class="dropdown-toggle bg-transparent text-secondary fs-15" data-bs-toggle="dropdown" aria-expanded="false">
                                            This Week
                                        </button>
                                    
                                        <ul class="dropdown-menu dropdown-menu-end bg-white border-0 box-shadow rounded-10" data-simplebar>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Day</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Week</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Month</button>
                                            </li>
                                            <li>
                                                <button class="dropdown-item text-secondary">This Year</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="default-table-area mx-minus-1 style-two table-engagement-overview for-border-color1">
                                    <div class="table-responsive">
                                        <table class="table align-middle">
                                            <thead>
                                                <tr>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Item Name</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Waste Amount</th>
                                                    <th scope="col" class="fw-normal text-body-color-40 fs-14">Date</th>
                                                </tr>
                                            </thead>
                                            <tbody id="top-waste-items-table-body">
                                                <tr>
                                                    <td colspan="3" class="text-center text-muted py-4">
                                                        <i class="ri-loader-4-line me-2"></i>Loading waste items...
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> 
                </div>

                <div class="flex-grow-1"></div>

                <!-- Start Footer Area -->
                <footer class="footer-area bg-white text-center rounded-10 rounded-bottom-0">
                    <p class="fs-16 text-body"> Cloudignite</p>
                </footer>
                <!-- End Footer Area -->
            </div>
        </div>
        <!-- Start Main Content Area -->

        <!-- Start Theme Setting Area -->
        <button class="btn btn-primary theme-settings-btn p-0 position-fixed z-2 text-center rounded-circle" style="bottom: 24px; right: 24px; width: 56px; height: 56px; line-height: 54px;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">
            <i class="text-white ri-settings-3-fill fs-28" data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="Click On Theme Settings"></i>
        </button>

        <!-- Start Theme Setting Area -->
        <div class="offcanvas offcanvas-end bg-white border-0" data-bs-scroll="true" data-bs-backdrop="true" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel" style="box-shadow: 0 4px 20px #2f8fe812 !important; max-width: 300px;">
            <div class="offcanvas-header bg-light p-20">
                <h5 class="offcanvas-title fs-18 fw-medium" id="offcanvasScrollingLabel">Configuration Panel</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body p-0 overflow-hidden">
                <div class="last-child-none" style="max-height: 858px;" data-simplebar>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">RTL Mode</h4>
                        <div class="rtl-btn">
                            <label id="switch">
                                <input type="checkbox" onchange="toggleTheme()" class="toggle-switch rtl-switch" id="slider">
                            </label>
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Only Sidebar Dark</h4>
                        <div class="sidebar-light-dark" id="sidebar-light-dark">
                            <input type="checkbox" class="toggle-switch sidebar-dark-switch">
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Only Header Dark</h4>
                        <div class="header-light-dark" id="header-light-dark">
                            <input type="checkbox" class="toggle-switch header-dark-switch">
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Right Sidebar</h4>
                        <div class="right-sidebar" id="right-sidebar">
                            <input type="checkbox" class="toggle-switch right-sidebar-switch">
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Hide Sidebar</h4>
                        <div class="icon-sidebar" id="icon-sidebar">
                            <input type="checkbox" class="toggle-switch icon-sidebar-switch">
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Bordered Card</h4>
                        <div class="card-border" id="card-border">
                            <input type="checkbox" class="toggle-switch border-switch">
                        </div>
                    </div>
                    <div class="p-20 border-bottom child">
                        <h4 class="fs-15 fw-medium mb-12">Card Border Radius</h4>
                        <div class="card-radius-square" id="card-radius-square">
                            <input type="checkbox" class="toggle-switch border-radius-switch">
                        </div>
                    </div>
                    
                    <div class="p-20 border-bottom child">
                        <a href="#" class="btn btn-primary text-white">
                            Buy Fila
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Theme Setting Area -->
     
        <!-- Link Of JS File -->
        <script src="../assets/js/bootstrap.bundle.min.js"></script>
        <script src="../assets/js/sidebar-menu.js"></script>
        <script src="../assets/js/quill.min.js"></script>
        <script src="../assets/js/data-table.js"></script>
        <script src="../assets/js/prism.js"></script>
        <script src="../assets/js/clipboard.min.js"></script>
        <script src="../assets/js/simplebar.min.js"></script>
        <script src="../assets/js/apexcharts.min.js"></script>
        <script src="../assets/js/echarts.min.js"></script>
        <script src="../assets/js/swiper-bundle.min.js"></script>
        <script src="../assets/js/fullcalendar.main.js"></script>
        <script src="../assets/js/jsvectormap.min.js"></script>
        <script src="../assets/js/world-merc.js"></script>
        <script src="../assets/js/custom/apexcharts.js"></script>
        <script src="../assets/js/custom/echarts.js"></script>
        <script src="../assets/js/custom/maps.js"></script>
        <script src="../assets/js/custom/custom.js"></script>
        <script src="../assets/js/auth/authService.js"></script>
        <script src="../assets/js/api/apiService.js"></script>
        <script src="../assets/js/sidebar/sidebarService.js"></script>
        
        <script>
            // Verify authentication
            document.addEventListener('DOMContentLoaded', function() {
                if (window.authService && !window.authService.isAuthenticated()) {
                    window.location.href = 'sign-in.html';
                    return;
                }
                // Owner View feature flag: hide nav link if disabled (503)
                (function checkOwnerViewFlag() {
                    var nav = document.getElementById('nav-owner-view');
                    if (!nav) return;
                    if (sessionStorage.getItem('ownerViewEnabled') === 'false') {
                        nav.style.display = 'none';
                        return;
                    }
                    if (!window.apiService) return;
                    window.apiService.getExecutiveSummary().then(function() {
                        sessionStorage.setItem('ownerViewEnabled', 'true');
                    }).catch(function(e) {
                        if (e && (e.status === 503 || e.code === 'FEATURE_DISABLED')) {
                            sessionStorage.setItem('ownerViewEnabled', 'false');
                            nav.style.display = 'none';
                        }
                    });
                })();
            });
            
            // Load Analytics Data
            (async function() {
                try {
                    // Load Dashboard Metrics
                    const metricsResponse = await window.apiService.getDashboardMetrics();
                    const metrics = metricsResponse.data || metricsResponse; // Support both formats
                    
                    // Update header metrics
                    if (document.getElementById('weekly-waste-amount')) {
                        document.getElementById('weekly-waste-amount').textContent = '$' + (metrics.weeklyLoss || 0).toLocaleString();
                    }
                    if (document.getElementById('food-cost-percent')) {
                        document.getElementById('food-cost-percent').textContent = (metrics.foodCostPercentage || 0) + '%';
                    }
                    if (document.getElementById('weekly-waste-total')) {
                        document.getElementById('weekly-waste-total').textContent = '$' + (metrics.weeklyLoss || 0).toLocaleString();
                    }
                    if (document.getElementById('waste-percentage')) {
                        document.getElementById('waste-percentage').textContent = (metrics.wastePercentage || 0) + '%';
                    }
                    if (document.getElementById('total-purchases')) {
                        // Get purchases from dashboard metrics or calculate from food cost
                        try {
                            // Try to get from dashboard metrics first (includes calculation data)
                            const dashboardMetrics = metrics;
                            if (dashboardMetrics.savingsBreakdown?.calculation?.totalPurchases !== undefined) {
                                const totalPurchases = dashboardMetrics.savingsBreakdown.calculation.totalPurchases;
                                document.getElementById('total-purchases').textContent = '$' + totalPurchases.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                            } else {
                                // Fallback: Calculate from invoices
                                const invoicesResponse = await window.apiService.getInvoices();
                                const invoices = invoicesResponse.data?.invoices || invoicesResponse.data || invoicesResponse;
                                const totalPurchases = Array.isArray(invoices) ? invoices.reduce((sum, inv) => sum + (inv.total_amount || 0), 0) : 0;
                                document.getElementById('total-purchases').textContent = '$' + totalPurchases.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                            }
                        } catch (error) {
                            console.warn('Error loading total purchases:', error);
                            document.getElementById('total-purchases').textContent = '$0';
                        }
                    }
                    if (document.getElementById('total-sales')) {
                        // Get sales from dashboard metrics or calculate from POS reports
                        try {
                            // Try to get from dashboard metrics first
                            const dashboardMetrics = metrics;
                            if (dashboardMetrics.savingsBreakdown?.calculation?.totalSales !== undefined) {
                                const totalSales = dashboardMetrics.savingsBreakdown.calculation.totalSales;
                                document.getElementById('total-sales').textContent = '$' + totalSales.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                            } else {
                                // Fallback: Calculate from POS reports
                                const posResponse = await window.apiService.getPOSReports();
                                const posReports = posResponse.data?.reports || posResponse.data || posResponse;
                                const totalSales = Array.isArray(posReports) ? posReports.reduce((sum, report) => sum + (report.total_sales || 0), 0) : 0;
                                document.getElementById('total-sales').textContent = '$' + totalSales.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
                            }
                        } catch (error) {
                            console.warn('Error loading total sales:', error);
                            document.getElementById('total-sales').textContent = '$0';
                        }
                    }
                    
                    // Load Daily Sales - Calculate today's sales or average daily sales
                    const dailySalesEl = document.getElementById('daily-sales-amount');
                    const salesTrendEl = document.getElementById('sales-trend');
                    if (dailySalesEl) {
                        try {
                            const posResponse = await window.apiService.getPOSReports();
                            const posReports = posResponse.data?.reports || posResponse.data || posResponse;
                            const today = new Date().toISOString().split('T')[0];
                            
                            // Try to get today's sales first
                            const todayReport = Array.isArray(posReports) ? posReports.find(r => {
                                const reportDate = r.report_date || r.date || '';
                                return reportDate === today || reportDate.startsWith(today);
                            }) : null;
                            
                            let dailySales = 0;
                            let salesTrend = 0;
                            
                            if (todayReport) {
                                // Use today's sales
                                dailySales = todayReport.total_sales || 0;
                            } else if (Array.isArray(posReports) && posReports.length > 0) {
                                // Calculate average daily sales from last 7 days
                                const last7Days = posReports
                                    .filter(r => {
                                        const reportDate = r.report_date || r.date || '';
                                        const date = new Date(reportDate);
                                        const daysDiff = (new Date() - date) / (1000 * 60 * 60 * 24);
                                        return daysDiff <= 7;
                                    })
                                    .slice(0, 7);
                                
                                const total7Days = last7Days.reduce((sum, r) => sum + (r.total_sales || 0), 0);
                                dailySales = last7Days.length > 0 ? total7Days / last7Days.length : 0;
                            }
                            
                            // Calculate trend (compare last 7 days with previous 7 days)
                            if (posReports.length >= 14) {
                                const sortedReports = posReports.sort((a, b) => {
                                    const dateA = new Date(a.report_date || a.date || 0);
                                    const dateB = new Date(b.report_date || b.date || 0);
                                    return dateB - dateA;
                                });
                                
                                const last7Days = sortedReports.slice(0, 7);
                                const prev7Days = sortedReports.slice(7, 14);
                                
                                const last7Total = last7Days.reduce((sum, r) => sum + (r.total_sales || 0), 0);
                                const prev7Total = prev7Days.reduce((sum, r) => sum + (r.total_sales || 0), 0);
                                
                                if (prev7Total > 0) {
                                    salesTrend = ((last7Total - prev7Total) / prev7Total) * 100;
                                }
                            }
                            
                            dailySalesEl.textContent = '$' + dailySales.toLocaleString(undefined, { 
                                minimumFractionDigits: 2, 
                                maximumFractionDigits: 2 
                            });
                            
                            if (salesTrendEl) {
                                const trendSign = salesTrend >= 0 ? '+' : '';
                                salesTrendEl.textContent = trendSign + salesTrend.toFixed(1) + '%';
                                salesTrendEl.className = salesTrend >= 0 
                                    ? 'lh-1 fs-14 text-success' 
                                    : 'lh-1 fs-14 text-danger';
                                
                                // Update icon color too
                                const trendIcon = salesTrendEl.previousElementSibling;
                                if (trendIcon && trendIcon.classList) {
                                    trendIcon.className = salesTrend >= 0
                                        ? 'material-symbols-outlined fs-14 text-success ms-1'
                                        : 'material-symbols-outlined fs-14 text-danger ms-1';
                                    trendIcon.textContent = salesTrend >= 0 ? 'trending_up' : 'trending_down';
                                }
                            }
                        } catch (error) {
                            console.warn('Error loading daily sales:', error);
                            dailySalesEl.textContent = '$0';
                        }
                    }
                    
                    // Load Waste Analysis - Get this week's data
                    const today = new Date();
                    const weekAgo = new Date(today);
                    weekAgo.setDate(today.getDate() - 7);
                    const startDate = weekAgo.toISOString().split('T')[0];
                    const endDate = today.toISOString().split('T')[0];
                    
                    const wasteAnalysisResponse = await window.apiService.getWasteAnalysis(startDate, endDate);
                    const wasteAnalysis = wasteAnalysisResponse.data || wasteAnalysisResponse; // Support both formats
                    
                    // Group waste data by category
                    const categoryMap = {};
                    let totalWaste = 0;
                    
                    const wasteArray = Array.isArray(wasteAnalysis) ? wasteAnalysis : (wasteAnalysis.items || []);
                    if (wasteArray && wasteArray.length > 0) {
                        wasteArray.forEach(item => {
                            const category = item.category || 'Uncategorized';
                            if (!categoryMap[category]) {
                                categoryMap[category] = {
                                    category: category,
                                    total_waste: 0,
                                    count: 0
                                };
                            }
                            categoryMap[category].total_waste += (item.totalLoss || item.wasteCost || item.estimatedWasteCost || 0);
                            categoryMap[category].count += 1;
                            totalWaste += (item.totalLoss || item.wasteCost || item.estimatedWasteCost || 0);
                        });
                        
                        // Calculate percentages and convert to array
                        const categories = Object.values(categoryMap).map(cat => ({
                            ...cat,
                            percentage: totalWaste > 0 ? (cat.total_waste / totalWaste) * 100 : 0
                        })).sort((a, b) => b.total_waste - a.total_waste);
                        
                        // Update Waste By Category list
                        const wasteList = document.getElementById('waste-by-category-list');
                        if (wasteList && categories.length > 0) {
                            wasteList.innerHTML = categories.slice(0, 8).map(cat => `
                                <li class="d-flex justify-content-between align-items-center border-border-color-50" style="border-bottom: 1px dashed; padding-bottom: 18px; margin-bottom: 18px;">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0 position-relative top-3">
                                            <i class="ri-delete-bin-line d-flex justify-content-center align-items-center fs-18 rounded-1 text-danger" style="width: 32px; height: 32px; box-shadow: 0px 4px 20px 0px rgba(232, 231, 244, 0.70);"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <span class="fs-16 text-secondary d-block">${cat.category}</span>
                                            <span class="fs-14">${cat.count} records</span>
                                        </div>
                                    </div>
                                    <div>
                                        <h3 class="fs-16 text-danger">$${cat.total_waste.toFixed(2)}</h3>
                                        <span class="fs-14 fw-medium text-danger">${cat.percentage.toFixed(1)}%</span>
                                    </div>
                                </li>
                            `).join('');
                        } else if (wasteList) {
                            wasteList.innerHTML = '<li class="text-center text-muted py-4">No waste data available.</li>';
                        }
                    } else {
                        // If no waste analysis data, try to get waste records directly
                        try {
                            const wasteRecordsResponse = await window.apiService.getWasteRecords(startDate, endDate);
                            const wasteRecordsData = wasteRecordsResponse.data || wasteRecordsResponse;
                            const wasteRecords = wasteRecordsData.wasteRecords || wasteRecordsData;
                            if (Array.isArray(wasteRecords) && wasteRecords.length > 0) {
                                // Group by category from waste records
                                const wasteCategoryMap = {};
                                let wasteTotal = 0;
                                
                                wasteRecords.forEach(record => {
                                    // Try to get category from inventory or default to Uncategorized
                                    const category = 'Uncategorized'; // Could be improved by joining with inventory table
                                    if (!wasteCategoryMap[category]) {
                                        wasteCategoryMap[category] = {
                                            category: category,
                                            total_waste: 0,
                                            count: 0
                                        };
                                    }
                                    wasteCategoryMap[category].total_waste += (record.cost_value || 0);
                                    wasteCategoryMap[category].count += 1;
                                    wasteTotal += (record.cost_value || 0);
                                });
                                
                                const wasteCategories = Object.values(wasteCategoryMap).map(cat => ({
                                    ...cat,
                                    percentage: wasteTotal > 0 ? (cat.total_waste / wasteTotal) * 100 : 0
                                })).sort((a, b) => b.total_waste - a.total_waste);
                                
                                const wasteList = document.getElementById('waste-by-category-list');
                                if (wasteList && wasteCategories.length > 0) {
                                    wasteList.innerHTML = wasteCategories.slice(0, 8).map(cat => `
                                        <li class="d-flex justify-content-between align-items-center border-border-color-50" style="border-bottom: 1px dashed; padding-bottom: 18px; margin-bottom: 18px;">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 position-relative top-3">
                                                    <i class="ri-delete-bin-line d-flex justify-content-center align-items-center fs-18 rounded-1 text-danger" style="width: 32px; height: 32px; box-shadow: 0px 4px 20px 0px rgba(232, 231, 244, 0.70);"></i>
                                                </div>
                                                <div class="flex-grow-1 ms-3">
                                                    <span class="fs-16 text-secondary d-block">${cat.category}</span>
                                                    <span class="fs-14">${cat.count} records</span>
                                                </div>
                                            </div>
                                            <div>
                                                <h3 class="fs-16 text-danger">$${cat.total_waste.toFixed(2)}</h3>
                                                <span class="fs-14 fw-medium text-danger">${cat.percentage.toFixed(1)}%</span>
                                            </div>
                                        </li>
                                    `).join('');
                                } else if (wasteList) {
                                    wasteList.innerHTML = '<li class="text-center text-muted py-4">No waste data available.</li>';
                                }
                            } else {
                                const wasteList = document.getElementById('waste-by-category-list');
                                if (wasteList) {
                                    wasteList.innerHTML = '<li class="text-center text-muted py-4">No waste data available. Record some waste to see analysis.</li>';
                                }
                            }
                        } catch (error) {
                            console.warn('Error loading waste records:', error);
                            const wasteList = document.getElementById('waste-by-category-list');
                            if (wasteList) {
                                wasteList.innerHTML = '<li class="text-center text-muted py-4">Error loading waste data. Please ensure the backend is running.</li>';
                            }
                        }
                    }
                    
                    // Load Slow Moving Items
                    const slowMovingResponse = await window.apiService.getSlowMovingItems();
                    const slowMoving = slowMovingResponse.data || slowMovingResponse; // Support both formats
                    const slowMovingArray = Array.isArray(slowMoving) ? slowMoving : (slowMoving.items || []);
                    if (document.getElementById('slow-moving-count')) {
                        document.getElementById('slow-moving-count').textContent = slowMovingArray.length || 0;
                    }
                    
                    // Load Top Waste Items
                    const wasteRecordsResponse = await window.apiService.getWasteRecords();
                    const wasteRecordsData = wasteRecordsResponse.data || wasteRecordsResponse;
                    const wasteRecords = wasteRecordsData.wasteRecords || wasteRecordsData;
                    const wasteRecordsArray = Array.isArray(wasteRecords) ? wasteRecords : [];
                    const wasteItemsTable = document.getElementById('top-waste-items-table-body');
                    if (wasteItemsTable && wasteRecordsArray.length > 0) {
                        const sortedWaste = wasteRecordsArray
                            .sort((a, b) => b.cost_value - a.cost_value)
                            .slice(0, 6);
                        
                        wasteItemsTable.innerHTML = sortedWaste.map(waste => {
                            const date = new Date(waste.waste_date);
                            return `
                                <tr>
                                    <td class="text-secondary fs-16">${waste.item_name || 'Unknown'}</td>
                                    <td class="text-danger fs-16 fw-medium">$${waste.cost_value.toFixed(2)}</td>
                                    <td class="text-secondary fs-16">${date.toLocaleDateString()}</td>
                                </tr>
                            `;
                        }).join('');
                    } else if (wasteItemsTable) {
                        wasteItemsTable.innerHTML = '<tr><td colspan="3" class="text-center text-muted py-4">No waste records found.</td></tr>';
                    }
                    
                } catch (error) {
                    console.warn('Error loading analytics data:', error);
                    // Set default values
                    if (document.getElementById('waste-by-category-list')) {
                        document.getElementById('waste-by-category-list').innerHTML = '<li class="text-center text-muted py-4">Error loading data. Please ensure the backend is running.</li>';
                    }
                }
            })();
        </script>
    </body>
</html>